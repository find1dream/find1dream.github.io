<!DOCTYPE html> <html> <head> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Bellman Equation V(s) Proof | Blog</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Bellman Equation V(s) Proof" /> <meta name="author" content="Linfeng Chen" /> <meta property="og:locale" content="en" /> <meta name="description" content="An gentle way to show the key point in reinforcement learning" /> <meta property="og:description" content="An gentle way to show the key point in reinforcement learning" /> <link rel="canonical" href="http://find1dream.github.io/en/Bellman_Fuction_Proof" /> <meta property="og:url" content="http://find1dream.github.io/en/Bellman_Fuction_Proof" /> <meta property="og:site_name" content="Blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2019-07-08T00:00:00+09:00" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Linfeng Chen"},"headline":"Bellman Equation V(s) Proof","url":"http://find1dream.github.io/en/Bellman_Fuction_Proof","datePublished":"2019-07-08T00:00:00+09:00","description":"An gentle way to show the key point in reinforcement learning","dateModified":"2019-07-08T00:00:00+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://find1dream.github.io/en/Bellman_Fuction_Proof"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <meta name="msvalidate.01" content="9BA9FDD8EA34D27F827CC11CF3A2D49D" /> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <meta name="author" content="Linfeng Chen"> <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="shortcut icon" href="/assets/img/81icon.png" /> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://find1dream.github.io/en/Bellman_Fuction_Proof"> <link type="application/atom+xml" rel="alternate" href="http://find1dream.github.io/feed.xml" title="Blog" /> <script src="/assets/js/prefixfree.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> <link rel="stylesheet" href="/css/syntax.css"> <!-- <link rel="stylesheet" href="/assets/js/katex/katex.css"> <script src="/assets/js/katex/katex.js"></script> --> <link rel="stylesheet" href="/assets/js/katex/katex.css"> <meta content="Blog" property="og:site_name"> <meta content="article" property="og:type"> <meta content="An gentle way to show the key point in reinforcement learning" property="og:description"> <meta content="http://find1dream.github.io/en/Bellman_Fuction_Proof" property="og:url"> <meta content="2019-07-08T00:00:00+09:00" property="article:published_time"> <meta content="http://find1dream.github.io/about/" property="article:author"> <meta content="/img/logo-high-resolution.png" property="og:image"> <meta content="en" property="article:section"> <meta content="Reinforcement Learning" property="article:tag"> <meta content="Math" property="article:tag"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-143337798-1', 'auto'); ga('send', 'pageview'); </script> </head> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Pandas Tricks | Blog</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Pandas Tricks" /> <meta name="author" content="Linfeng Chen" /> <meta property="og:locale" content="en" /> <meta name="description" content="This post shows you some tricks of pandas." /> <meta property="og:description" content="This post shows you some tricks of pandas." /> <link rel="canonical" href="http://find1dream.github.io/en/Pandas_tricks" /> <meta property="og:url" content="http://find1dream.github.io/en/Pandas_tricks" /> <meta property="og:site_name" content="Blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2019-09-10T00:00:00+09:00" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Linfeng Chen"},"headline":"Pandas Tricks","url":"http://find1dream.github.io/en/Pandas_tricks","datePublished":"2019-09-10T00:00:00+09:00","description":"This post shows you some tricks of pandas.","dateModified":"2019-09-10T00:00:00+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://find1dream.github.io/en/Pandas_tricks"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <body> <meta name="viewport" content="width=device-width, initial-scale=1"> <style> .dropbtn { background-color: #696969; color: rgba(255,255,255,0.7); padding: 12px; font-size: 16px; border: none; box-sizing: content-box; width: 100%; text-align: center; border-bottom:1px solid #fff; } .dropup { position: relative; display: inline-block; } .dropup-content { display: none; position: absolute; background-color: #f1f1f1; min-width: 120px; bottom: 40px; z-index: 1; } .dropup-content p { color: black; padding: 10px 0px; text-decoration: none; display: block; text-align: center; text-decoration: underline; } .dropup-content p:hover {background-color: #ccc;} .dropup:hover .dropup-content {display: block;} .dropup:hover .dropbtn {background-color: #ddd;} .mystyle { width: 100%; padding: 25px; background-color: coral; color: white; font-size: 25px; } </style> <style> .sidebar-tags { background-color: #696969; color: rgba(255,255,255,0.7); padding: 11px 45px 11px 44px; position: relative; top: 14px; font-size: 16px; border: none; box-sizing: content-box; width: 100%; text-align: center; text-decoration: none; border-bottom: 1px solid #fff; } .sidebar-archives { background-color: #696969; color: rgba(255,255,255,0.7); padding: 11px 29px 11px 29px; position: relative; top: 45px; font-size: 16px; border: none; box-sizing: content-box; width: 100%; text-align: center; text-decoration: none; border-bottom: 1px solid #fff; } } </style> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script>function initialization() { var elements_en = document.getElementsByClassName("sidebar-tag en"); var elements_ch = document.getElementsByClassName("sidebar-tag ch"); var elements_ja = document.getElementsByClassName("sidebar-tag ja"); for (var i = 0; i < elements_ch.length; i++){ elements_ch[i].style.display = 'block'; } for (var i = 0; i < elements_en.length; i++){ elements_en[i].style.display = 'none'; } for (var i = 0; i < elements_ja.length; i++){ elements_ja[i].style.display = 'none'; } } </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> <script>function myFunction_ch() { var elements_en = document.getElementsByClassName("sidebar-tag en"); var elements_ch = document.getElementsByClassName("sidebar-tag ch"); var elements_ja = document.getElementsByClassName("sidebar-tag ja"); for (var i = 0; i < elements_ch.length; i++){ elements_ch[i].style.display = 'block'; } for (var i = 0; i < elements_en.length; i++){ elements_en[i].style.display = 'none'; } for (var i = 0; i < elements_ja.length; i++){ elements_ja[i].style.display = 'none'; } }</script> <script>function myFunction_en() { var elements_en = document.getElementsByClassName("sidebar-tag en"); var elements_ch = document.getElementsByClassName("sidebar-tag ch"); var elements_ja = document.getElementsByClassName("sidebar-tag ja"); for (var i = 0; i < elements_ch.length; i++){ elements_ch[i].style.display = 'none'; } for (var i = 0; i < elements_en.length; i++){ elements_en[i].style.display = 'block'; } for (var i = 0; i < elements_ja.length; i++){ elements_ja[i].style.display = 'none'; } elements_en[0].style.display = 'none'; }</script> <script>function myFunction_ja() { var elements_en = document.getElementsByClassName("sidebar-tag en"); var elements_ch = document.getElementsByClassName("sidebar-tag ch"); var elements_ja = document.getElementsByClassName("sidebar-tag ja"); for (var i = 0; i < elements_ch.length; i++){ elements_ch[i].style.display = 'none'; } for (var i = 0; i < elements_en.length; i++){ elements_en[i].style.display = 'none'; } for (var i = 0; i < elements_ja.length; i++){ elements_ja[i].style.display = 'block'; } elements_ja[0].style.display = 'none'; }</script> <script>function reset(){ window.location.href.split("?")[0]; window.location.reload(); window.location.replace("/"); } </script> <script>function readMe_language(){ var avatar = document.getElementById("sidebar-avatar-img"); console.log(avatar); } </script> <aside id="sidebar" class="open"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="/assets/img/81icon.png"/> </a> <div id="sidebar-social"> <a href="/pages/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:clinfeng.jlu@gmail.com" class="sidebar-social-icon email"></a> <!-- Generate icon by yourself https://icomoon.io/app/#/select --> <a href="https://github.com/find1dream" class="sidebar-social-icon github" target="_blank"></a> </div> <p></p> <ul id="sidebar-tags" class = "testa"> <div class="dropup"> <button class="dropbtn">Language</button> <div class="dropup-content"> <p onclick="myFunction_ch()">中文</p> <p onclick="myFunction_en()">English</p> <p onclick="myFunction_ja()">日本語</p> </div> </div> <li class="sidebar-tag active" data-filter="recent">Latest</li> <li class="sidebar-tag en" data-filter="en">en</li> <li class="sidebar-tag en" data-filter="Tech">Tech</li> <li class="sidebar-tag ch" data-filter="分享">分享</li> <li class="sidebar-tag ch" data-filter="读书">读书</li> <li class="sidebar-tag ja" data-filter="ja">ja</li> <li class="sidebar-tag ja" data-filter="読書">読書</li> <li class="sidebar-tag en" data-filter="Share">Share</li> <script>initialization();</script> <a class="sidebar-tags" href="/pages/tags.html">tags</a> <a class="sidebar-archives" href="/pages/archive.html">archives</a> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="分享" href="/ch/get_highly_skilled_foreign_professionals_visa_in_japan">DIY 申请高度专门职1号那些事</a> --> <a class="toc-link ch" data-tags="分享" href="/ch/get_highly_skilled_foreign_professionals_visa_in_japan">DIY 申请高度专门职1号那些事</a> <a class="toc-link en" data-tags="en Tech" href="/en/How_to_train_multiple_model_in_one_time_with_sklearn">How To Train Multiple Model In One Time With Sklearn</a> <a class="toc-link en" data-tags="en Tech" href="/en/Pandas_tricks">Pandas Tricks</a> <a class="toc-link en" data-tags="en Tech" href="/en/A_least_squares_approach">A Least Squares Approach</a> <a class="toc-link en" data-tags="en Tech" href="/en/Linear_modeling_Maximum_likelihood_approach">Linear Modeling - A Maximum Likelihood Approach</a> <a class="toc-link en" data-tags="en Tech" href="/en/Bayesian_approach_to_machine_learning">The Bayesian Approach To Machine Learning</a> <a class="toc-link en" data-tags="en Tech" href="/en/An_introduction_to_ESN">An Introduction To ESN</a> <a class="toc-link en" data-tags="en Tech" href="/en/Modeling_with_NMF_and_SVD">Modeling With NMF And SVD</a> <a class="toc-link en" data-tags="en Share" href="/en/Interesting_papers_to_replicate">Interesting Papers To Replicate</a> <a class="toc-link en" data-tags="en Share" href="/en/Feature_engineering">Feature Engineering For Machine Learning</a> <a class="toc-link en" data-tags="en Share" href="/en/C++_tricks">Usefull C++ Tricks</a> <a class="toc-link en" data-tags="en Tech" href="/en/PCA_and_SVD">PCA And SVD</a> <a class="toc-link en" data-tags="en Share" href="/en/How_to_change_CNN_structure_in_running_time_with_pytorch">An Easy Way To Change CNN Structure In Running Time With Pytorch</a> <a class="toc-link ja" data-tags="ja 読書" href="/ja/reviews-how_to_increase_your_money_in_an_easy_way">【Book Review】難しいことはわかりませんが、お金の増やし方を教えてください</a> <a class="toc-link en" data-tags="en Tech" href="/en/Bounding_box_introduction">Bounding Box Regression</a> <a class="toc-link ja" data-tags="ja 読書" href="/ja/reviews-boki_for_beginer_with_manga">【Book Review】オールカラー　マンガでわかる！はじめての簿記</a> <a class="toc-link en" data-tags="en Tech" href="/en/Flappy_Bird_DQN_with_Pytorch">It's Really Easy To Play Flappy Bird Via Reinforcement Learning</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="读书" href="/ch/reviews-attitude">【Book Review】态度</a> --> <a class="toc-link ch" data-tags="读书" href="/ch/reviews-attitude">【Book Review】态度</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="读书" href="/ch/reviews-complete_writing_guide">【Book Review】完全写作指南</a> --> <a class="toc-link ch" data-tags="读书" href="/ch/reviews-complete_writing_guide">【Book Review】完全写作指南</a> <a class="toc-link en" data-tags="en Tech" href="/en/Cart_Pole_example_for_Temporal_Difference_learning_with_Pytorch">How To Play Cart Pole Game with Temporal Difference Learning By Pytorch?</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="分享" href="/ch/how_to_improve_japanese_skills_from_N1">日语通过 N1 之后如何进阶？</a> --> <a class="toc-link ch" data-tags="分享" href="/ch/how_to_improve_japanese_skills_from_N1">日语通过 N1 之后如何进阶？</a> <a class="toc-link en" data-tags="en Tech" href="/en/An_introduction_to_Temporal-Difference_learning">An Easy Way To Understand Temporal-Difference Learning In Reinforcement Learning</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="读书" href="/ch/reviews-learn_how_to_write">【Book Review】学会写作：自我进阶的高效方法</a> --> <a class="toc-link ch" data-tags="读书" href="/ch/reviews-learn_how_to_write">【Book Review】学会写作：自我进阶的高效方法</a> <a class="toc-link en" data-tags="en Tech" href="/en/Importance_sampling_proof">Importance Sampling In Reinforcement learning</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="分享" href="/ch/how_to_make_practical_mindmaps_with_Marginnote-tool">如何用 Marginnote 做实用性强的思维导图（实践篇）</a> --> <a class="toc-link ch" data-tags="分享" href="/ch/how_to_make_practical_mindmaps_with_Marginnote-tool">如何用 Marginnote 做实用性强的思维导图（实践篇）</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="分享" href="/ch/how_to_make_practical_mindmaps_with_Marginnote-theory">如何用 Marginnote 做实用性强的思维导图（理论篇）</a> --> <a class="toc-link ch" data-tags="分享" href="/ch/how_to_make_practical_mindmaps_with_Marginnote-theory">如何用 Marginnote 做实用性强的思维导图（理论篇）</a> <a class="toc-link en" data-tags="en Tech" href="/en/An_introduction_to_Monte_Carlo_learning">An Easy Way To Understand Monte Carlo Learning In Reinforcement Learning</a> <a class="toc-link en" data-tags="en Tech" href="/en/An_introduction_to_dynamic_programming">An Easy Way To Understand Dynamic Programming In Reinforcement Learning</a> <a class="toc-link en" data-tags="en Tech" href="/en/An_introduction_to_mdp">An Easy Way To Understand Markov Decision Process In Reinforcement Learning</a> <!-- <a onclick="window.location.href=this" class="toc-link ch" data-tags="分享" href="/ch/why_do_I_choose_Jekyll_to_write_blog">为什么我选择 Jekyll + Github Pages 而不是 Wordpress 写技术博客？</a> --> <a class="toc-link ch" data-tags="分享" href="/ch/why_do_I_choose_Jekyll_to_write_blog">为什么我选择 Jekyll + Github Pages 而不是 Wordpress 写技术博客？</a> <a class="toc-link en" data-tags="en Tech" href="/en/The_Easiest_Introduction_To_Cross_Validation">The Easiest Introduction To Cross Validation</a> <a class="toc-link en" data-tags="en Tech" href="/en/How_To_Use_SVM_In_Python">How To Use SVM In Python?</a> <a class="toc-link en" data-tags="en Tech" href="/en/Bellman_Fuction_Proof">Bellman Equation V(s) Proof</a> </nav> </div> </aside> <main id="main" class="open"> <link rel="stylesheet" href="/css/en_font.css"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2019 September 10</span> <span class="post-meta-span tag">Python, Pandas</span> <span id="busuanzi_container_page_pv" text-align="center"> <span id="busuanzi_value_page_pv"></span> </span> </div> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- horizontal_ads --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4428678099867228" data-ad-slot="2208981001" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <h1 class="post-title">Pandas Tricks</h1> <hr align="center" width="14%"> <h3 id="create-dataframe">Create dataframe</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create DataFrame 1
</span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'x'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">'y'</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">x</span>  <span class="n">y</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">4</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">5</span>
<span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">6</span>
</code></pre></div></div> <h3 id="converting-a-dataframe-to-a-numpy-array">Converting a DataFrame to a Numpy Array</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">values</span>
<span class="ow">or</span> <span class="n">table</span> <span class="n">presentation</span>
<span class="n">df</span><span class="p">.</span><span class="n">as_matrix</span>
</code></pre></div></div> <h3 id="iterate-dataframe">Iterate dataframe</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">1.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">iterrows</span><span class="p">():</span>
<span class="p">...</span>     <span class="n">z</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">row</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="p">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">z</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="mf">2.</span><span class="n">We</span> <span class="n">could</span> <span class="n">also</span> <span class="n">write</span> <span class="n">it</span> <span class="n">using</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">comprehension</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span> <span class="n">row</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">row</span><span class="p">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">iterrows</span><span class="p">()</span> <span class="p">]</span>
<span class="n">We</span> <span class="n">could</span> <span class="n">then</span> <span class="n">assign</span> <span class="n">this</span> <span class="nb">list</span> <span class="n">to</span> <span class="n">our</span> <span class="n">new</span> <span class="n">column</span><span class="p">.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s">'z'</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">6</span>  <span class="mi">9</span>
</code></pre></div></div> <h3 id="creating-a-new-column-by-looping">Creating a new Column by Looping</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">topping_type</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">topping</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'pepperoni'</span><span class="p">,</span> <span class="s">'chicken'</span><span class="p">,</span> <span class="s">'anchovies'</span><span class="p">]:</span>
        <span class="n">topping_type</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'meat'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">topping_type</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'vegetable'</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s">'topping_type'</span><span class="p">]</span> <span class="o">=</span> <span class="n">topping_type</span>
</code></pre></div></div> <h3 id="to-apply-a-function-to-all-columns-or-rows">To apply a function to all columns or rows</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'x'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">'y'</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">row</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span>    <span class="mi">5</span>
<span class="mi">1</span>    <span class="mi">7</span>
<span class="mi">2</span>    <span class="mi">9</span> 
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="ow">or</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s">'z'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">row</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">6</span>  <span class="mi">9</span>


</code></pre></div></div> <h3 id="vectorized-operations">Vectorized operations</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'x'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">'y'</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">.</span><span class="n">x</span>
<span class="mi">0</span>    <span class="mi">1</span>
<span class="mi">1</span>    <span class="mi">2</span>
<span class="mi">2</span>    <span class="mi">3</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s">'z'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">df</span><span class="p">.</span><span class="n">y</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">6</span>  <span class="mi">9</span>
</code></pre></div></div> <h3 id="meansstd-of-dataframe">Means/Std of dataframe</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'average'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
       <span class="n">salary_1</span>  <span class="n">salary_2</span>  <span class="n">salary_3</span>     <span class="n">average</span>
<span class="mi">0</span>       <span class="mi">230</span>       <span class="mi">235</span>       <span class="mi">210</span>  <span class="mf">225.000000</span>
<span class="mi">1</span>       <span class="mi">345</span>       <span class="mi">375</span>       <span class="mi">385</span>  <span class="mf">368.333333</span>
<span class="mi">2</span>       <span class="mi">222</span>       <span class="mi">292</span>       <span class="mi">260</span>  <span class="mf">258.000000</span>

<span class="ow">or</span> <span class="n">some</span> <span class="n">of</span> <span class="n">it</span>
<span class="n">df</span><span class="p">[</span><span class="s">'average_1_3'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s">'salary_1'</span><span class="p">,</span> <span class="s">'salary_3'</span><span class="p">]].</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">salary_1</span>  <span class="n">salary_2</span>  <span class="n">salary_3</span>  <span class="n">average_1_3</span>
<span class="mi">0</span>       <span class="mi">230</span>       <span class="mi">235</span>       <span class="mi">210</span>        <span class="mf">220.0</span>
<span class="mi">1</span>       <span class="mi">345</span>       <span class="mi">375</span>       <span class="mi">385</span>        <span class="mf">365.0</span>
<span class="mi">2</span>       <span class="mi">222</span>       <span class="mi">292</span>       <span class="mi">260</span>        <span class="mf">241.0</span>

<span class="n">another</span> <span class="n">method</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s">"salary_1"</span><span class="p">:</span><span class="s">"salary_3"</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s">'salary_mean'</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <h3 id="sum-of-dataframe">Sum of dataframe</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'C'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">numeric_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="ow">or</span>
<span class="n">df</span><span class="p">[</span><span class="s">'C'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'A'</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s">'B'</span><span class="p">]</span>
<span class="ow">or</span>
<span class="n">f</span><span class="p">[</span><span class="s">'C'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">'A'</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s">'B'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="ow">or</span>
<span class="n">df</span><span class="p">[</span><span class="s">'C'</span><span class="p">]</span> <span class="o">=</span>  <span class="n">df</span><span class="p">[[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">]].</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="ow">or</span>
<span class="n">df</span><span class="p">[</span><span class="s">'sum'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">)].</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="ow">or</span>
<span class="n">df</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">A</span> <span class="o">+</span> <span class="n">df</span><span class="p">.</span><span class="n">B</span><span class="p">,</span>
          <span class="n">Diff</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">B</span> <span class="o">-</span> <span class="n">df</span><span class="p">.</span><span class="n">A</span><span class="p">,</span>
          <span class="n">Mult</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">A</span> <span class="o">*</span> <span class="n">df</span><span class="p">.</span><span class="n">B</span><span class="p">)</span>
<span class="c1"># Out[379]: 
#    A  B   C  Diff  Mult
# 0  1  4   5     3     4
# 1  2  6   8     4    12
# 2  3  9  12     6    27
</span></code></pre></div></div> <h3 id="importing-a-csv-file-loading-massive-datasets-in-smaller-chunks">Importing a csv file/ Loading Massive Datasets in Smaller Chunks</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'pizza.csv'</span><span class="p">)</span>
<span class="c1">#Need to parse dates? Just pass in the corresponding column name(s).
</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'pizza.csv'</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">'dates'</span><span class="p">])</span>
<span class="c1">#Only need a few specific columns?
</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'pizza.csv'</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s">'foo'</span><span class="p">,</span> <span class="s">'bar'</span><span class="p">])</span>




<span class="n">chunksize</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'pizza.csv'</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="n">chunksize</span><span class="p">):</span>
    <span class="c1"># Do stuff...
</span>    <span class="n">chunks</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">chunks</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div> <h3 id="exploring-data-in-a-dataframe">Exploring Data in a DataFrame</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>       <span class="c1"># first five rows
</span><span class="n">df</span><span class="p">.</span><span class="n">tail</span><span class="p">()</span>       <span class="c1"># last five rows
</span><span class="n">df</span><span class="p">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>    <span class="c1"># random sample of rows
</span><span class="n">df</span><span class="p">.</span><span class="n">shape</span>        <span class="c1"># number of rows/columns in a tuple
</span><span class="n">df</span><span class="p">.</span><span class="n">describe</span><span class="p">()</span>   <span class="c1"># calculates measures of central tendency
</span><span class="n">df</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>       <span class="c1"># memory footprint and datatypes
</span></code></pre></div></div> <h3 id="adding-a-new-column-to-a-dataframe">Adding a New Column to a DataFrame</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Need the column in a certain order? The first argument is the position of the column. This will put the column at the begining of the DataFrame.
</span><span class="n">df</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">'original_price'</span><span class="p">,</span> <span class="n">full_price</span><span class="p">)</span>
</code></pre></div></div> <h3 id="select-a-specific-cell-value">Select a Specific “Cell” Value</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rowindex</span><span class="p">,</span> <span class="s">'A'</span><span class="p">]</span> 
<span class="n">df</span><span class="p">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="s">'A'</span><span class="p">]</span>
<span class="n">df</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="s">"A"</span><span class="p">]</span>
</code></pre></div></div> <h3 id="filtering-dataframes-with-conditional-logic">Filtering dataframes with conditional logic</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filtered_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">.</span><span class="n">price</span> <span class="o">&gt;</span> <span class="mf">11.99</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">topping</span> <span class="o">==</span> <span class="s">'Pineapple'</span><span class="p">)]</span>
</code></pre></div></div> <h3 id="sorting-a-dataframe-by-a-certain-column">Sorting a DataFrame by a Certain Column</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s">'price'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s">'avg'</span><span class="p">,</span><span class="s">"ID"</span><span class="p">])</span> <span class="c1">#first sort avg, and ID
</span></code></pre></div></div> <h3 id="set-output-precesion">Set output precesion</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pandas</span><span class="p">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">'precision'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div></div> <h3 id="apply-a-function-to-every-row-in-a-column">Apply a Function to Every Row in a Column</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calculate_taxes</span><span class="p">(</span><span class="n">price</span><span class="p">):</span>
    <span class="n">taxes</span> <span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">0.12</span>
    <span class="k">return</span> <span class="n">taxes</span>

<span class="n">df</span><span class="p">[</span><span class="s">'taxes'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">price</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">calculate_taxes</span><span class="p">)</span>
</code></pre></div></div> <h3 id="add-a-new-column-with-conditional-logic">Add a New Column with Conditional Logic</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'profitable'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'price'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mf">15.00</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</code></pre></div></div> <h3 id="combining-dataframes-with-concatenation">Combining DataFrames with Concatenation</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_1</span><span class="p">,</span> <span class="n">df_2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#Or to concat columns horizontally:
</span>
<span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_1</span><span class="p">,</span> <span class="n">df_2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <h3 id="combining-dataframes-based-on-an-index-key">Combining DataFrames based on an Index Key</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Merging in Pandas works just like SQL. If you you have two DataFrames that share a key, perhaps a pizza ‘order_id’, you can perform inner, outer, left, right joins just like you would in SQL.
</span>
<span class="n">merged_df</span> <span class="o">=</span> <span class="n">df_1</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">'left'</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s">'order_id'</span><span class="p">)</span>
</code></pre></div></div> <h3 id="converting-dates-to-their-own-day-week-month-year-columns">Converting Dates to their own Day, Week, Month, Year Columns</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#make sure the data is in datetime format. Then use dt method to extract the data you need.
</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">date</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'weekday'</span><span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="p">.</span><span class="n">dt</span><span class="p">.</span><span class="n">weekday</span>
<span class="n">df</span><span class="p">[</span><span class="s">'year'</span><span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="p">.</span><span class="n">dt</span><span class="p">.</span><span class="n">year</span>
</code></pre></div></div> <h3 id="finding-nans-in-a-dataframe">Finding NaNs in a DataFrame</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Count the total number of NaNs present:
</span>
<span class="n">df</span><span class="p">.</span><span class="n">isnull</span><span class="p">().</span><span class="nb">sum</span><span class="p">().</span><span class="nb">sum</span><span class="p">()</span>
<span class="c1">#List the NaN count for each column:
</span>
<span class="n">df</span><span class="p">.</span><span class="n">isnull</span><span class="p">().</span><span class="nb">sum</span><span class="p">()</span>
</code></pre></div></div> <h3 id="filling-nans-or-missing-data">Filling NaNs or Missing Data</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">topping</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">topping</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="s">'Cheese'</span><span class="p">)</span>
<span class="c1"># or we can drop any row missing data across the entire DataFrame:
</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div> <h3 id="extracting-features-by-grouping-columns">Extracting Features by Grouping Columns</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Grouping columns is a great way to extract features from data. This is especially useful when you have data that can be counted or quantified in some way. For example, you might have group pizzas by topping, then calculate the mean for price in each group.
</span>
<span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'topping'</span><span class="p">)[</span><span class="s">'discount'</span><span class="p">].</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1">#or maybe you want to see the count of a certain value
</span>
<span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'topping'</span><span class="p">)[</span><span class="s">'discount'</span><span class="p">].</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="n">count</span><span class="p">())</span>

<span class="n">topping</span>
<span class="n">Anchovies</span>      <span class="mi">3</span>
<span class="n">Bell</span> <span class="n">Pepper</span>    <span class="mi">1</span>
<span class="n">Cheese</span>         <span class="mi">2</span>
<span class="n">Olives</span>         <span class="mi">1</span>
<span class="n">Pepperoni</span>      <span class="mi">3</span>
<span class="n">Pineapple</span>      <span class="mi">2</span>
<span class="n">Veggie</span>         <span class="mi">1</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">discount</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</code></pre></div></div> <h3 id="creating-bins">Creating Bins</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Let’s say we want to create 3 separate bins for different price ranges. This is especially useful for simplifying noisy data.
</span>
<span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Cheap'</span><span class="p">,</span> <span class="s">'Normal'</span><span class="p">,</span> <span class="s">'Expensive'</span><span class="p">]</span>

<span class="n">df</span><span class="p">[</span><span class="s">'price_point'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>

 <span class="n">order_numbe</span>	<span class="n">price</span>	<span class="n">price_point</span>
<span class="mi">0</span>	<span class="n">PZZA0000</span>	<span class="mf">12.99</span>	<span class="n">Normal</span>
<span class="mi">1</span>	<span class="n">PZZA0001</span>	<span class="mf">14.50</span>	<span class="n">Normal</span>
<span class="mi">2</span>	<span class="n">PZZA0002</span>	<span class="mf">19.99</span>	<span class="n">Expensive</span>
<span class="mi">3</span>	<span class="n">PZZA0003</span>	<span class="mf">20.99</span>	<span class="n">Expensive</span>
<span class="mi">4</span>	<span class="n">PZZA0004</span>	<span class="mf">21.99</span>	<span class="n">Expensive</span>

</code></pre></div></div> <h3 id="square-sum">Square sum</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div> <h3 id="delete-unique-data">Delete unique data</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_train</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df_train</span><span class="p">[</span><span class="n">df_train</span><span class="p">[</span><span class="s">'GrLivArea'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">4000</span><span class="p">].</span><span class="n">index</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <h3 id="select-some-columns">Select some columns</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_train_shrinked</span><span class="o">=</span><span class="n">df_train</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s">'GrLivArea'</span><span class="p">,</span><span class="s">'YearBuilt'</span><span class="p">,</span><span class="s">'OverallCond'</span><span class="p">,</span><span class="s">'BsmtQual'</span><span class="p">]]</span>
<span class="n">df_x</span><span class="o">=</span><span class="n">df_train_shrinked</span>

<span class="n">GrLivArea</span>	<span class="n">YearBuilt</span>	<span class="n">OverallCond</span>	<span class="n">BsmtQual</span>
<span class="mi">0</span>	<span class="mi">1710</span>	<span class="mi">2003</span>	<span class="mi">5</span>	<span class="n">Gd</span>
<span class="mi">1</span>	<span class="mi">1262</span>	<span class="mi">1976</span>	<span class="mi">8</span>	<span class="n">Gd</span>
<span class="mi">2</span>	<span class="mi">1786</span>	<span class="mi">2001</span>	<span class="mi">5</span>	<span class="n">Gd</span>
<span class="mi">3</span>	<span class="mi">1717</span>	<span class="mi">1915</span>	<span class="mi">5</span>	<span class="n">TA</span>
<span class="mi">4</span>	<span class="mi">2198</span>	<span class="mi">2000</span>	<span class="mi">5</span>	<span class="n">Gd</span>
</code></pre></div></div> <h3 id="data-to-value">Data to value</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_x</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_x</span><span class="p">)</span>
</code></pre></div></div> <h3 id="column-change-types">Column change types</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</code></pre></div></div> <h3 id="minmaxscaler-by-sklearn">MinMaxscaler by sklearn</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[[</span><span class="s">"x"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">scaler</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s">"x"</span><span class="p">]])</span>
</code></pre></div></div> <h3 id="group-sum">Group sum</h3> <p>group by <code class="highlighter-rouge">mm</code>, and sum by <code class="highlighter-rouge">k</code></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'mm'</span><span class="p">)[</span><span class="s">'k'</span><span class="p">].</span><span class="nb">sum</span><span class="p">().</span><span class="n">resun_index</span><span class="p">()</span>
</code></pre></div></div> <h3 id="date-make">Date make</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'value'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">2</span><span class="p">)},</span>
     <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">'2019-01-01'</span><span class="p">,</span> <span class="s">'2019-01-31'</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="s">'2D'</span><span class="p">))</span>  <span class="c1"># "W" week
</span></code></pre></div></div> <h3 id="change-a-column-from-category-to-data-by-dict">Change a column from category to data by dict</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dictA</span> <span class="o">=</span> <span class="p">{</span><span class="s">"m"</span><span class="p">:</span><span class="mi">1</span><span class="p">,...}</span>
<span class="n">df</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'x'</span><span class="p">].</span><span class="nb">apply</span><span class="p">(</span><span class="n">dictA</span><span class="p">.</span><span class="n">get</span><span class="p">)</span>
</code></pre></div></div> <hr align="center" width="14%"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- horizontal_ads --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4428678099867228" data-ad-slot="2208981001" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <div class="relatedPosts"> <h4 id="related_posts">You May Also Enjoy</h4> <script > $("#related_posts").hide(); </script> <script > $("#related_posts").show(); </script> <div> <h5><a href="/en/How_to_train_multiple_model_in_one_time_with_sklearn">How To Train Multiple Model In One Time With Sklearn <span class="label label-default">--Python</span> </a></h5> </div> <script > $("#related_posts").show(); </script> <div> <h5><a href="/en/How_to_change_CNN_structure_in_running_time_with_pytorch">An Easy Way To Change CNN Structure In Running Time With Pytorch <span class="label label-default">--Python</span> </a></h5> </div> <script > $("#related_posts").show(); </script> <div> <h5><a href="/en/How_To_Use_SVM_In_Python">How To Use SVM In Python? <span class="label label-default">--Python</span> </a></h5> </div> </div> <p><strong>Welcome to share or comment on this post: </strong></p> </article> <div class="post-share"> <div class="container"> <!-- AddToAny BEGIN --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style" style=" float: unset; display: inline-flex; place-items: center;"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_wechat"></a> <a class="a2a_button_evernote"></a> <a class="a2a_button_line"></a> <a class="a2a_button_sina_weibo"></a> <a class="a2a_button_douban"></a> <a class="a2a_button_qzone"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.onclick = 1; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <!-- AddToAny END --> </div> </div> <div class="comment container"> <div id="disqus_thread"> </div> </div> <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Built with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu" class="open"> <span id="menu-icons"></span> </button> <button id="post-toc-menu"> <span id="post-toc-menu-icons"></span> </button> <div id="post-toc"> <span id="post-toc-title">Table of Contents</span> <ul id="post-toc-ul"></ul> </div> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-143337798-1', 'auto'); ga('send', 'pageview'); </script> <!-- Load jQuery --> <!-- Load KaTeX --> </body> </html>
